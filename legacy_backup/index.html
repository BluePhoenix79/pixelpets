<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>PixelPets</title>
    <meta name="description" content="PixelPets"/>
    <script>
        // Immediately apply saved theme before styles load so dark mode paints instantly
        (function(){
            try {
                const theme = localStorage.getItem('theme-preference') || 'system';
                if (theme === 'system') {
                    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
                } else {
                    document.documentElement.setAttribute('data-theme', theme);
                }
            } catch(e){/* ignore on older browsers */}
        })();
    </script>
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="settings.css">
</head>
<header class="title">
        <h1>PixelPets</h1>
        <div class="pet-icons">
            <span class="pet-icon">üê∂</span>
            <span class="pet-icon">üê±</span>
            <span class="pet-icon">üê¶</span>
            <span class="pet-icon">üê†</span>
            <span class="pet-icon">üê∞</span>
        </div>
    </header>

    <div id="user-info" style="display: none;">
        <div class="balance-display">
            Balance: <span id="balance-amount">$0</span>
        </div>
        <div class="user-bar-buttons">
            <button id="settings-btn" class="user-bar-btn">Settings</button>
            <button id="logout-btn" class="user-bar-btn">Logout</button>
        </div>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="settings-content"></div>
        </div>
    </div>

    <main>
        <section id="controls" aria-label="Pet controls">
            <form id="new-pet-form" autocomplete="off">
                <label for="pet-name">Pet Name</label>
                <input id="pet-name" name="name" type="text" required placeholder="Enter Pet Name"/>
                <label for="pet-species">Species</label>
                <select id="pet-species" name="species" required>
                    <option value="">Select a species</option>
                    <option value="dog">Dog</option>
                    <option value="cat">Cat</option>
                    <option value="bird">Bird</option>
                    <option value="fish">Fish</option>
                    <option value="mouse">Mouse</option>
                </select>
                <br>
                <button id="button" type="submit">Create Pet</button>
            </form>

            <div id="pet-list" style="display: none;">
                <h2>Your Pets</h2>
                <div id="pets-container"></div>
            </div>
        </section>
    </main>
        <script>
            window.__SUPABASE_URL__ = 'https://nryaeijchclavecxydgp.supabase.co';
            window.__SUPABASE_ANON_KEY__ = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yeWFlaWpjaGNsYXZlY3h5ZGdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDI2NzAsImV4cCI6MjA3Nzc3ODY3MH0.zkdYILuEM1LuF6LeS5_SXqMVrV8ViiL2tOR2eUpOHko';
        </script>
        <script type="module" src="main.js"></script>
        <script>
        // Apply theme from localStorage or system preference
        (function() {
            const theme = localStorage.getItem('theme-preference') || 'system';
            const root = document.documentElement;
            if (theme === 'system') {
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                root.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
            } else {
                root.setAttribute('data-theme', theme);
            }
        })();
        </script>

</body>
</html>